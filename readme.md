# Deployment Guide for Render

##  Quick Deployment Steps

### 1. Prepare Your Repository

1. **Push to GitHub:**
   ```bash
   git add .
   git commit -m "Prepare for Render deployment"
   git push origin main
   ```

2. **Ensure all files are present:**
   - `render.yaml` (blueprint file)
   - `requirements.txt` (with gunicorn and psycopg2-binary)
   - `wsgi.py` (production entry point)
   - `runtime.txt` (Python version)

### 2. Deploy on Render

1. **Go to [Render Dashboard](https://dashboard.render.com)**

2. **Create New Blueprint:**
   - Click "New +"
   - Select "Blueprint"
   - Connect your GitHub repository
   - Select the repository with your sales dashboard

3. **Render will automatically:**
   - Create a PostgreSQL database
   - Create a web service
   - Install dependencies
   - Run your application

### 3. Set Environment Variables

In your Render service dashboard, add these environment variables:

**Required:**
- `JOTFORM_API_KEY`: Your JotForm API key
- `SECRET_KEY`: Auto-generated by Render
- `MASTER_PASSWORD`: Custom password for master user (optional)

**Optional:**
- `CORS_ORIGINS`: Your Render app URL
- `LOG_LEVEL`: INFO

### 4. Access Your Application

- Your app will be available at: `https://your-app-name.onrender.com`
- Master login: `username: master`, `password: master123` (or your custom password)

## ðŸ”§ Manual Deployment (Alternative)

If you prefer manual setup:

### 1. Create PostgreSQL Database
- Go to Render Dashboard
- New + â†’ PostgreSQL
- Name: `sales-dashboard-db`
- Plan: Free

### 2. Create Web Service
- New + â†’ Web Service
- Connect GitHub repository
- Name: `sales-dashboard`
- Build Command: `pip install -r requirements.txt`
- Start Command: `gunicorn wsgi:app`
- Plan: Free

### 3. Add Environment Variables
```
SECRET_KEY=your-secret-key
JOTFORM_API_KEY=your-api-key
DATABASE_URL=postgresql://... (from database)
FLASK_ENV=production
```

##  Troubleshooting

### Common Issues:

1. **Build fails:**
   - Check `requirements.txt` has all dependencies
   - Ensure Python version is correct in `runtime.txt`

2. **Database connection error:**
   - Verify `DATABASE_URL` environment variable
   - Check PostgreSQL service is running

3. **Application crashes:**
   - Check logs in Render dashboard
   - Verify `wsgi.py` is correct

4. **Templates not found:**
   - Ensure `templates/` directory is in repository
   - Check Flask template path configuration

### Viewing Logs:
- Go to your service in Render dashboard
- Click "Logs" tab to see application output

##  Database Management

### Initial Setup:
The application automatically:
- Creates all database tables
- Creates master user
- Sets up basic configuration

### Manual Database Operations:
You can run scripts using Render's Shell:
1. Go to service dashboard
2. Click "Shell" tab
3. Run commands like:
   ```bash
   python scripts/create_master_user.py
   ```

##  Security Notes

- Master password is auto-generated secure
- Database uses PostgreSQL with SSL
- All environment variables are encrypted
- CORS is configured for your domain
- Security headers are enabled

##  Cost

- **Free Tier includes:**
  - 512MB RAM
  - Shared CPU
  - PostgreSQL database (90 days)
  - Custom domain support
  - Auto-deploy from Git

- **Limitations:**
  - App sleeps after 15 minutes of inactivity
  - 750 hours/month limit
  - Database expires after 90 days (backup and restore)

## ðŸ”„ Updates

To update your deployed app:
1. Push changes to GitHub
2. Render automatically rebuilds and deploys
3. Zero-downtime deployment

Your Sales Dashboard is now live on Render!